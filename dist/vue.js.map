{"version":3,"file":"vue.js","sources":["../src/observer/index.js","../src/initState.js","../src/init.js","../src/index.js"],"sourcesContent":["export function observer (data) {\r\n    // 1  判断\r\n    if (typeof data != 'object' || data === null) {\r\n        return data\r\n    }\r\n    // 1 对象通过一个类\r\n    return  new Observer (data)\r\n    \r\n}\r\n\r\nclass Observer {\r\n    constructor (value) {\r\n\r\n        this.walk(value) // 遍历\r\n    }\r\n    walk(data) {  // {msg: 'hello'}\r\n        let keys = Object.keys(data)\r\n\r\n        for (let i = 0; i < keys.length;i++) {\r\n            // 对象我们的每个属性进行劫持\r\n            let key = keys[i]\r\n            let value = data[key]\r\n            defineReactive(data,key,value)\r\n        } \r\n    }\r\n}\r\n// 对对象中的属性进行劫持\r\nfunction defineReactive (data, key, value) { // { a: { b: 1}}\r\n    observer(value) // 深度代理\r\n    Object.defineProperty(data,key, {\r\n        get () {\r\n            console.log('获取');\r\n            return value\r\n        },\r\n        set (newValue) {\r\n            console.log('设置',newValue);\r\n            if (newValue === value) return\r\n            observer(newValue) // 如果用户设置的值是对象\r\n            value = newValue\r\n        }\r\n    })\r\n}\r\n\r\n// vue Object.defineProperty 缺点 对象中的一个属性 {a:1, b:2}\r\n\r\n// {a: {}, list: []}\r\n\r\n// 总结: (1) 对象\r\n// 1 Object.defineProperty 有缺点 只能 对象中的一个属性 进行劫持\r\n// 2 遍历 {a: 1, b: 2, obj: {}}\r\n// 3 get set","import { observer } from \"./observer/index\";\r\n\r\nexport function initState (vm) {\r\n    let opts = vm.$options\r\n    console.log('opts',opts);\r\n    // 判断\r\n    if (opts.props) {\r\n         initProps(vm)\r\n    }\r\n    if (opts.data) {\r\n         initData(vm)\r\n    }\r\n    if (opts.watch) {\r\n         initWatch(vm)\r\n    }\r\n    if (opts.computed) {\r\n         initComputed(vm)\r\n    }\r\n    if (opts.methods) {\r\n         initMethods(vm)\r\n    }\r\n}\r\n\r\nfunction initProps () {}\r\nfunction initWatch () {}\r\nfunction initComputed () {}\r\nfunction initMethods () {}\r\n\r\n// vue2 对data初始化\r\nfunction initData (vm)  {\r\n    // console.log('data初始化'); // (1) 对象 (2) 函数\r\n\r\n    let data = vm.$options.data\r\n    data = vm._data = typeof data === 'function' ? data.call(vm) : data\r\n    // data数据进行劫持\r\n    observer(data)\r\n}\r\n\r\n// data {} (1) 对象 (2) 数组 ","import { initState } from \"./initState\";\r\nexport function initMixin(Vue) {\r\n    Vue.prototype._init = function(options) {\r\n        // console.log(options);\r\n        let vm = this\r\n        vm.$options = options\r\n        // 初始化状态\r\n        initState(vm)\r\n    }\r\n}\r\n\r\n ","import { initMixin } from \"./init\";\r\n\r\nfunction Vue (options) {\r\n\tconsole.log(options); \r\n//     // 初始化\r\n    this._init(options)\r\n}\r\ninitMixin(Vue) \r\n// export const a = 100\r\n// export default {a : 1}\r\nexport default Vue "],"names":[],"mappings":"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"}